<script lang='ts'>
  import { onMount } from 'svelte';

  let vinesSvgElement: SVGSVGElement;
  let path: any;
  let isClient: boolean = false;

  onMount(() => {
    if (typeof window !== 'undefined') {
      isClient = true;

      setTimeout(() => {
        if (vinesSvgElement && path) {
          let pathLength = path.getTotalLength();
          path.style.strokeDasharray = pathLength + ' ' + pathLength;
          path.style.strokeDashoffset = pathLength;
          window.addEventListener('scroll', () => {
            animate(pathLength);
          });
        }
      }, 0);
    }

    function animate(pathLength: number) {
      const svgRect = vinesSvgElement.getBoundingClientRect();
      const svgBottomToTop = svgRect.bottom + window.scrollY;
      const windowHeight = window.innerHeight;
      // Maximum scroll distance for the SVG to be at the bottom of the viewport
      const maxScrollDistance = svgBottomToTop - windowHeight;
      // Current scroll position
      const scrollPosition = window.scrollY;
      // Calculate the scroll percentage
      let scrollPercentage = Math.min(Math.max(scrollPosition / maxScrollDistance, 0), 1);
      let drawLength = pathLength * scrollPercentage;
      path.style.strokeDashoffset = pathLength - drawLength;
    }
  });
</script>

{#if isClient}
  <section class="pad">
    <svg bind:this={vinesSvgElement} viewBox="0 0 580 768" fill="none" preserveAspectRatio="xMidYMax meet">
      <path bind:this={path}
            id="scroll-line-4"
            d="M485 4C485 4 527.352 194.119 450.5 198C402.3 200.434 363.35 173.579 349 127.5C326.705 55.9107 486.991 75.489 541 127.5C602.046 186.288 574.694 278.76 520 343.5C458.222 416.625 368.715 417.516 278.5 385.5C234.403 369.851 217.742 350.5 221.5 329.5C230 282 278.5 277.5 321.5 312C393.382 369.673 297.5 528 264.5 541C231.5 554 153.06 582.198 91 554.5C48.4871 535.526 4.00004 513.5 4 473C3.99996 432.5 114.84 430.22 166 467.5C247.063 526.57 126.835 625.223 63.5 703C42.4871 728.804 4 764 4 764"
            stroke="url(#paint0_radial_104_5)"
            stroke-width="8"
            stroke-linecap="round" />
      <defs>
        <radialGradient
          id="paint0_radial_104_5"
          cx="0"
          cy="0"
          r="1"
          gradientUnits="userSpaceOnUse"
          gradientTransform="translate(465 147.5) rotate(124.873) scale(806.29 606.555)">
          <stop stop-color="#31af31" />
          <stop stop-color="#31af31" />
        </radialGradient>
      </defs>
    </svg>
    <!-- <svg id="vines" viewBox="0 0 920.22 494.99" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,0,0)">
      <path class="" d="M451.16 271.75a28.36 28.36 0 0 0 21.08-20.15c4.16-15.12-5.95-26.3-21.07-30.46-10.67-2.94-26.34 3.39-36.07 7.14C380 241.82 354.61 242 337.32 242a101.51 101.51 0 0 1-19.16-1.25s76.92 47.52 133 31ZM779 282.65a28.39 28.39 0 0 0-6.24-28.49c-10.74-11.42-25.55-8.61-37 2.13-8.07 7.59-10.82 24.26-12.67 34.53-6.69 37-19.81 58.77-28.74 73.57a101.11 101.11 0 0 1-11 15.71s80.59-40.97 95.65-97.45Zm125.26-55.16a28.36 28.36 0 0 0-5.26-28.68c-10.35-11.77-25.25-9.46-37 .9-8.32 7.32-11.62 23.88-13.82 34.08-7.91 36.74-21.75 58.08-31.17 72.58a101.45 101.45 0 0 1-11.61 15.33s81.91-38.27 98.86-94.21Z"></path>
      <path bind:this={path} style="" class="" d="M315 236.08c5 6.62 9.68 13.5 14.27 20.41a455.34 455.34 0 0 1 27.73 47.2 244.1 244.1 0 0 1 13.18 30.08 130.7 130.7 0 0 1 5.91 29c1 9.11.72 18.6-3.92 26.76-8.43 14.74-25 17.12-39.06 7.64-5.66-3.81-15.85-18.37-11.38-36.84 19.4-75.82-6.73-124.25-6.73-124.25Zm103.7 95.16c6.79 4.78 13.35 9.89 19.83 15.07a455.48 455.48 0 0 1 40.84 36.45 244.09 244.09 0 0 1 21.75 24.6 130.6 130.6 0 0 1 14.51 25.83c3.7 8.38 6.38 17.49 4.46 26.68-3.52 16.61-18.54 23.94-34.85 19.23-6.56-1.9-20.72-12.64-22.1-31.59-4.73-78.16-44.44-116.27-44.44-116.27Zm135.68 45.42c8 2.32 15.84 5 23.65 7.83a456.06 456.06 0 0 1 50.44 21.25A244.87 244.87 0 0 1 657 422a130.71 130.71 0 0 1 22.1 19.73c6.21 6.73 11.7 14.48 12.86 23.8 2 16.85-9.78 28.65-26.74 29.48-6.81.33-23.69-5.24-31.15-22.72-29.78-72.44-79.69-95.63-79.69-95.63Zm108.8 2.34c8.24-1 16.54-1.6 24.82-2.11a456.5 456.5 0 0 1 54.74-.31 243.35 243.35 0 0 1 32.63 3.68 130.71 130.71 0 0 1 28.08 9.44c8.36 3.75 16.45 8.71 21.18 16.82 8.52 14.68 2.29 30.19-13 37.62-6.14 3-23.85 4.51-37.58-8.63C718.19 380.68 663.18 379 663.18 379ZM213.37 152.59c6.08 5.65 11.89 11.6 17.62 17.6a456.06 456.06 0 0 1 35.58 41.6 244.35 244.35 0 0 1 18.25 27.3 131.11 131.11 0 0 1 10.91 27.55c2.54 8.8 4 18.18.84 27-5.72 16-21.58 21.23-37.12 14.37-6.24-2.75-18.83-15.3-17.66-34.27 5.81-78.05-28.42-121.15-28.42-121.15ZM82.53 118.55c7.35 3.86 52.85 2.84 99.23 59.41 6.3 7.67 12.6 15.27 17.74 23.73 4.75 7.83 8.58 16.51 7.87 25.88-1.34 16.92-15.28 26.14-32.07 23.58-6.74-1-19.65-11-22.26-29.77-11.74-84.52-75.16-104.52-70.51-102.83Z"></path>
      <path class="" d="M84.78 120.77c7.75-3 52.81 3.4 105.54-47.31 7.15-6.88 14.31-13.68 20.41-21.48 5.64-7.22 10.47-15.38 10.86-24.77.67-17-12.09-27.75-29.06-27.19-6.82.23-20.81 8.55-25.62 26.98-21.62 82.5-86.91 94.89-82.13 93.77ZM416.86 332c8.28.61 46.35 25.54 115.64 2.08 9.4-3.18 18.77-6.29 27.61-10.75 8.17-4.13 16-9.47 20.37-17.79 7.82-15.07.86-30.27-14.74-37-6.27-2.69-22.46-1.11-34.64 13.48C476.42 347.55 412 331 416.86 332ZM206.19 154.27c8.29.44 46.87 24.58 115.66-.31 9.33-3.37 18.64-6.68 27.38-11.33 8.08-4.29 15.82-9.79 20-18.2 7.51-15.23.24-30.28-15.49-36.66-6.33-2.57-22.49-.65-34.36 14.19-53.32 66.62-118.05 51.37-113.19 52.31Zm706.9 175.38a23.64 23.64 0 0 1-32.16 34.65c-65.23-42.08-109.72-17.07-109.73-17.06 2.3-1.29 4.39-3.59 6.53-5.16A155.11 155.11 0 0 1 796 330.57c19-10.24 40.29-16.76 62-16.69a105.64 105.64 0 0 1 28.69 4.32c8.51 2.46 19.87 5.08 26.4 11.45Zm-239.28-42.81a23.65 23.65 0 0 0-47.13 3.79c-7.34 77.28-54.53 96.73-54.54 96.74 3.35-1.39 7.52-1.73 11-2.78a156.64 156.64 0 0 0 26.5-10.59c24.69-12.63 45.72-32.33 56.6-58.17 3.61-8.6 8.58-19.48 7.57-28.99Z"></path>
      <path class="" d="M826.35 291.66C741.09 372 612.12 399 502.06 360.05c-51.51-18.23-96.21-48.16-135.65-85.84C340.94 249.86 318 223 292 199.13a388.77 388.77 0 0 0-84.61-59c-66.51-34.34-136.33-36.38-203.11-1.6-9.83 5.12-1.14 20 8.68 14.86C46.37 136 82.51 126.3 120.3 130.08c35.28 3.52 68.5 18.13 98.63 36.19 64.11 38.41 106.79 98.6 163.8 145.41 70.73 58.06 161.64 91.16 253.68 82.31 74-7.12 147.89-39.05 202.11-90.16 8.07-7.61-4.11-19.76-12.17-12.17Z"></path>
    </svg> -->
    <!-- <svg direction="ltr"
         width="315.93"
         height="622.97"
         viewBox="-116.69947339349261 362.78 315.93 622.97"
         stroke-linecap="round"
         stroke-linejoin="round"
         style="background-color: rgb(19, 19, 21);">
      <defs/>
      <g transform="matrix(1, 0, 0, 1, 48.65, 394.79)" opacity="1">
        <path bind:this={path}
              d="M3.1613,-2.702 Q6.3227,-2.5576 10.08,-2.2887 T18.085,-1.1846 26.58,1.25 34.92,5.2976 42.78,11.1928 49.93,18.9749 56.38,28.6087 62.18,40.1512 67.18,53.1241 71.11,66.0956 73.90,77.8084 75.70,88.5265 76.73,98.8631 76.81,108.9459 75.32,119.1428 71.95,129.9808 66.87,141.7029 60.38,154.0282 52.73,166.2811 44.02,177.8413 34.27,188.2446 23.69,197.1073 12.04,204.173 -1.5714,209.317 -17.4902,212.6442 -34.9852,214.2666 -52.957,213.8346 -70.2558,211.104 -85.8702,206.5699 -99.1681,200.9248 -110.128,194.4545 -118.9716,187.363 -125.7975,179.8356 -130.6863,171.4831 -133.4212,161.6499 -133.1439,149.9068 -128.8451,136.5315 -120.3863,122.6762 -108.634,109.6906 -95.127,98.725 -81.3057,90.4879 -67.7801,85.0176 -54.7941,81.7828 -42.4981,80.5109 -30.699,81.6912 -19.0473,85.647 -7.4149,92.3326 3.96,101.5635 14.52,112.8202 23.72,125.5316 31.15,139.213 36.63,153.576 40.24,168.5899 42.10,184.1927 41.97,199.9739 39.47,215.3655 34.47,230.1622 27.13,244.3387 18.15,257.668 8.32,269.9722 -1.9775,281.16 -12.5492,291.0766 -23.0133,299.6463 -33.1349,306.974 -42.9133,313.3429 -52.3846,319.0136 -61.5329,324.0309 -70.1627,328.3134 -78.1414,331.8733 -85.848,334.8497 -93.6136,337.3135 -101.2039,339.1699 -108.3355,340.3672 -114.7779,341.0529 -120.3497,341.2723 -125.0973,340.798 -129.1596,339.0623 -132.289,335.1516 -134.1658,327.6597 -134.9676,315.8899 -133.9763,299.7214 -129.6065,278.9087 -121.6081,255.3686 -110.9678,232.1402 -98.4762,210.9005 -84.6107,192.2166 -70.215,176.5712 -56.3338,164.4433 -43.5455,155.6919 -31.9249,149.8115 -21.2826,146.2151 -11.4212,144.234 -2.0432,143.7059 7.30,145.1226 16.82,148.7206 26.46,154.3648 35.99,161.6967 45.08,170.2587 53.52,179.8117 61.33,190.2822 68.81,202.0059 76.23,215.5035 83.63,230.8363 90.91,247.7436 97.78,265.8387 103.91,284.472 108.99,302.7016 112.92,319.9051 115.88,336.0461 118.01,351.1692 119.38,365.3681 120.09,378.7724 120.01,391.6036 118.78,404.1568 116.47,416.4315 113.43,428.2955 109.82,439.7117 105.74,450.5841 101.55,460.5292 97.47,469.3563 93.29,477.5168 88.85,485.2854 84.15,492.6613 79.16,499.7785 74.00,506.6897 68.67,513.4612 63.13,520.1759 57.38,526.8199 51.54,533.0751 45.40,538.789 38.39,544.0864 30.70,548.5982 22.67,552.1785 14.15,555.0805 4.97,557.3449 -5.0937,558.9707 -15.9184,559.9891 -26.9296,560.5237 -37.7119,560.4022 -48.14,558.8933 -57.9834,555.1475 -66.89,548.3698 -74.5026,538.0378 -80.4058,523.4408 -84.3628,503.7771 -85.8593,479.603 -83.999,453.0982 -78.5593,426.3975 -69.8378,400.4376 -58.4124,376.2069 -45.1224,355.0051 -30.8363,337.6519 -16.5695,324.3542 -3.3345,314.8618 8.51,308.6401 19.22,304.8355 28.61,302.8774 36.54,302.6199 43.09,303.6081 48.16,305.054 51.95,306.5239 55.50,308.204 57.64,309.3349 58.07,309.7679 58.34,310.3153 58.42,310.9198 58.30,311.5179 58.00,312.0472 57.54,312.4522 56.98,312.6905 56.37,312.7371 55.78,312.5872 55.27,312.2565 54.89,311.7795 54.68,311.2063 54.67,310.5968 54.85,310.0149 55.21,309.5214 55.71,309.1681 56.29,308.992 56.90,309.0114 57.47,309.2244 57.94,309.6086 58.27,310.1239 58.41,310.7162 58.36,311.3236 58.12,311.8824 57.71,312.3342 57.18,312.6316 56.58,312.7436 55.97,312.6583 55.68,312.5664 53.79,311.6162 50.51,309.8776 47.17,308.3742 42.54,306.9961 36.60,306.0448 29.27,306.2468 20.34,308.0821 10.08,311.6956 -1.3563,317.672 -14.244,326.8846 -28.1969,339.8519 -42.2182,356.8433 -55.3066,377.6818 -66.5803,401.5363 -75.1922,427.088 -80.5718,453.3394 -82.4301,479.3807 -80.9998,503.0798 -77.2431,522.137 -71.7514,536.019 -64.807,545.6819 -56.7282,551.9785 -47.6229,555.5056 -37.6643,556.9623 -27.095,557.0841 -16.2415,556.5616 -5.6455,555.5736 4.14,554.0045 13.04,551.8227 21.27,549.0343 28.97,545.6286 36.31,541.3426 43.06,536.2688 49.03,530.7229 54.78,524.5672 60.47,517.9839 65.96,511.3297 71.24,504.6291 76.34,497.8026 81.24,490.8083 85.86,483.5757 90.23,475.9453 94.35,467.9081 98.38,459.1882 102.52,449.3737 106.54,438.6718 110.09,427.439 113.08,415.7911 115.35,403.8168 116.57,391.5782 116.65,378.9524 115.95,365.6948 114.60,351.6471 112.49,336.6634 109.57,320.6692 105.67,303.6225 100.64,285.5467 94.57,267.0628 87.75,249.1063 80.53,232.3355 73.22,217.1662 65.91,203.8619 58.57,192.3403 50.93,182.0878 42.72,172.7625 33.89,164.4225 24.72,157.3295 15.61,151.927 6.77,148.5029 -1.8771,147.1334 -10.7616,147.6122 -20.2041,149.482 -30.3961,152.8955 -41.62,158.5506 -54.0787,167.0559 -67.6808,178.9225 -81.8343,194.2876 -95.4861,212.6673 -107.7992,233.5953 -118.2891,256.4905 -126.152,279.6048 -130.4244,299.9008 -131.3686,315.621 -130.6561,326.7038 -129.3602,332.9912 -127.4676,335.9032 -124.6036,337.3463 -120.4605,337.8349 -115.1344,337.6282 -108.8974,336.9715 -102.0148,335.8251 -94.652,334.0314 -87.0864,331.6376 -79.5407,328.727 -71.6896,325.227 -63.1863,321.0104 -54.1518,316.058 -44.7903,310.4559 -35.1499,304.1826 -25.1901,296.9794 -14.9001,288.5627 -4.5064,278.8253 5.63,267.8213 15.30,255.7412 24.08,242.756 31.22,229.0552 36.08,214.8014 38.54,199.9347 38.69,184.5956 36.90,169.3895 33.42,154.7947 28.12,140.8454 20.93,127.5399 12.02,115.1699 1.79,104.2306 -9.1243,95.3064 -20.1591,88.8862 -31.0685,85.0887 -42.1751,83.9262 -53.9808,85.1225 -66.513,88.2087 -79.5677,93.4496 -92.9746,101.4019 -106.0946,111.9983 -117.4648,124.4623 -125.5982,137.5753 -129.7455,149.9997 -130.1313,160.7697 -127.7188,169.7901 -123.2329,177.5594 -116.8021,184.7003 -108.362,191.508 -97.8053,197.7689 -84.8959,203.2727 -69.7078,207.7118 -52.8677,210.399 -35.3022,210.8414 -18.1977,209.2799 -2.7875,206.11 10.27,201.2328 21.49,194.4626 31.77,185.8865 41.27,175.7656 49.81,164.4555 57.33,152.4225 63.71,140.3375 68.65,128.9602 71.91,118.6422 73.35,108.9657 73.27,99.2044 72.26,89.1018 70.49,78.6139 67.74,67.1169 63.86,54.4082 58.97,41.7806 53.35,30.6566 47.19,21.5127 40.49,14.2771 33.21,8.9062 25.49,5.3129 17.59,3.2882 9.98,2.6041 3.16,2.702 -0.5447,2.7381 -1.5511,2.3212 -2.3213,1.5509 -2.7381,0.5445 -2.7381,-0.5448 -2.3211,-1.5512 -1.5508,-2.3214 -0.5444,-2.7381 0.00,-2.8464 3.16,-2.702 Z"
              fill="#40c057"
              stroke-linecap="round"/>
      </g>
    </svg> -->
  </section>
{/if}

<style>
  svg {
    display: inline-block;
    height: 100%;
  }

  #vines {
    width: 100%;
    height: 100%;
    fill: #31af31;
    stroke: #31af31;
    stroke-width: 1;
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-miterlimit: 10;
    z-index: 1;
  }

  .pad {
    height: 100%;
    width: 100%;
    text-align: center;
    overflow: hidden;
  }
</style>